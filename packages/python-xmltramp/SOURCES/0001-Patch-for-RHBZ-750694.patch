From ebc1a41118befdc7a92e0ccd04819d488775316d Mon Sep 17 00:00:00 2001
From: Dan Callaghan <dcallagh@redhat.com>
Date: Fri, 18 Nov 2011 15:13:59 +1000
Subject: [PATCH 1/5] Patch for RHBZ#750694

---
 xmltramp.py | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/xmltramp.py b/xmltramp.py
index 9a4908a..7819b25 100644
--- a/xmltramp.py
+++ b/xmltramp.py
@@ -224,7 +224,9 @@ def startElementNS(self, name, qname, attrs):
 
 		attrs = dict(attrs)
 		newprefixes = {}
-		for k in self.prefixes.keys(): newprefixes[k] = self.prefixes[k][-1]
+		for k in self.prefixes.keys():
+			if self.prefixes[k]:
+				newprefixes[k] = self.prefixes[k][-1]
 		
 		self.stack.append(Element(name, attrs, prefixes=newprefixes.copy()))
 	
@@ -357,5 +359,6 @@ def unittest():
 	
 	assert parse('<x a="&lt;"></x>').__repr__(1) == '<x a="&lt;"></x>'
 	assert parse('<a xmlns="http://a"><b xmlns="http://b"/></a>').__repr__(1) == '<a xmlns="http://a"><b xmlns="http://b"></b></a>'
+	assert parse('<a><b xmlns="http://b"/><c/></a>').__repr__(1) == '<a><b xmlns="http://b"></b><c></c></a>'
 	
 if __name__ == '__main__': unittest()
-- 
2.14.4

