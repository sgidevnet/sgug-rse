From fcc0e38077c9e7b09377805da23dac55e3d817fa Mon Sep 17 00:00:00 2001
From: Dan Callaghan <dcallagh@redhat.com>
Date: Thu, 16 Jun 2016 16:30:40 +1000
Subject: [PATCH] use setuptools console_scripts for /usr/bin/unidiff


diff --git a/setup.py b/setup.py
index d3ba282..73f6dce 100644
--- a/setup.py
+++ b/setup.py
@@ -39,7 +39,11 @@
     author_email=EMAIL,
     url=URL,
     packages=find_packages(exclude=('tests',)),
-    scripts=['bin/unidiff'],
+    entry_points={
+        'console_scripts': [
+            'unidiff = unidiff.cli:main',
+        ],
+    },
     include_package_data=True,
     license=LICENSE,
     classifiers=[
diff --git a/bin/unidiff b/unidiff/cli.py
old mode 100755
new mode 100644
similarity index 98%
rename from bin/unidiff
rename to unidiff/cli.py
index 3d370e8..3242f28
--- a/bin/unidiff
+++ b/unidiff/cli.py
@@ -1,4 +1,3 @@
-#!/usr/bin/env python
 
 from __future__ import print_function, unicode_literals
 
@@ -30,8 +29,7 @@ def get_parser():
                         help='if not specified, read diff data from stdin')
     return parser
 
-
-if __name__ == '__main__':
+def main():
     parser = get_parser()
     args = parser.parse_args()
 
@@ -73,3 +71,6 @@ def get_parser():
     if renamed_files:
         print('%d file(s) renamed' % renamed_files)
     print('Total: %d addition(s), %d deletion(s)' % (additions, deletions))
+
+if __name__ == '__main__':
+    main()
-- 
2.26.2

